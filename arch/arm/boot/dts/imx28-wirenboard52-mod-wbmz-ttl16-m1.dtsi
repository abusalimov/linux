/*
 * Copyright 2015 Contactless Devices, LLC.
 *
 * The code contained herein is licensed under the GNU General Public
 * License. You may obtain a copy of the GNU General Public License
 * Version 2 or later at the following locations:
 *
 * http://www.opensource.org/licenses/gpl-license.html
 * http://www.gnu.org/copyleft/gpl.html
 */

#include <dt-bindings/gpio/gpio.h>
#include "skeleton.dtsi"
#include "imx28-pinfunc.h"

/ {
    apb@80000000 {
        apbh@80000000 {

            pinctrl: pinctrl@80018000 {
                mod1_pins: mod1_pins@0 {
                    reg = <0>;
                    fsl,pinmux-ids = <
                        MX28_PAD_SSP2_SS2__GPIO_2_21   /* MOD1 SDA */
                        MX28_PAD_SSP1_SCK__GPIO_2_12   /* MOD1 SCL */
                        MX28_PAD_SSP3_SS0__GPIO_2_27    /* MOD1 CS */
                    >;
                    fsl,drive-strength = <MXS_DRIVE_8mA>;
                    fsl,voltage = <MXS_VOLTAGE_HIGH>;
                    fsl,pull-up = <MXS_PULL_DISABLE>;
                };
            };
        };
    };

    i2c-mod1@0 {
            compatible = "i2c-gpio";
            gpios = <&gpio2 21 0 /* sda */
                     &gpio2 12 0 /* scl */
                    >;
            i2c-gpio,delay-us = <20>;        /* ~100 kHz */

            pinctrl-names = "default";
            pinctrl-0 = <&mod1_pins>;

            status = "okay";

            gpiomext1: gpio@20 {
                    compatible = "microchip,mcp23017";
                    gpio-controller;
                    #gpio-cells = <2>;
                    reg = <0x20>;

                    interrupt-parent = <&gpio2>;
                    interrupts = <27 IRQ_TYPE_LEVEL_LOW>;
                    interrupt-controller;
                    #interrupt-cells=<2>;
                    microchip,irq-mirror;
                    linux,gpio-base = <224>;

            };


    };

};
